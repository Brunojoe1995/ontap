---
permalink: nfs-admin/manage-nfsv4-storepool-controls-task.html
sidebar: sidebar
keywords: enable, disable, nfsv4, storepool, controls, limit, client, resource, blocked,
summary: "Beginning with ONTAP 9.13, administrators can enable their NFS servers to deny resources to NFS clients when they have reached per client storepool resource limits."
---
= Manage NFSv4 storepool limits
:icons: font
:imagesdir: ../media/

[.lead]

Beginning with ONTAP 9.13, administrators can enable their NFSv4 servers to deny resources to NFSv4 clients when they have reached per client storepool resource limits. When clients consume too many NFSv4 storepool resources this leads to other NFSv4 clients getting blocked due to unavailability of NFSv4 storepool resources. 

Enabling this feature also allows customers to view the active storepool resource consumption by each client. This makes it easier to identify clients exhausting system resources, and makes it possible to impose per client resource limits. 

== Enable or disable storepool limit controls
Before you can view or modify limits on storepool resources, you need to enable the storepool limit controls. Admins can use the follow commands to enable or disable storepool limit controls. 

.Step

. As an admin, perform one of the following actions:
+
[cols="2*",options="header"]
|===
| If you want to...| Enter the following command...
a|
Enable storepool limit controls
a|
`vserver nfs storepool config modify -limit-enforce enabled`
a|
Disable storepool limit controls
a|
`vserver nfs storepool config modify -limit-enforce disabled`
|===


== View a list of blocked clients
If the storepool limit is enabled, admins can see which clients have been blocked upon reaching their per client resource threshold. Admins can use the following command to see which clients have been marked as blocked clients.  

.Steps

. Use the CLI to display the NFSv4 blocked client list.

.. `vserver nfs storepool blocked-client show`


== Remove a client from the blocked client list
Clients that reach their per client threshold will be disconnected and added to the block-client cache. Admins can use the following command to remove the client from the block client cache. This will allow the client to connect to the ONTAP NFSV4 server.

.Steps

. Use the CLI to flush the storepool blocked client cache.

.. `vserver nfs storepool blocked-client flush -client-ip <ip address>`

. Verify the client has been removed from the block client cache.

.. `vserver nfs storepool blocked-client show`

