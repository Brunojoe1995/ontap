---
permalink: encryption-at-rest/enable-cluster-fips-compliant-mode-task.html
sidebar: sidebar
keywords: enabling, cluster-wide, fips-compliant mode, kmip, server, connections
summary: "You can use the security config modify command with the -is-fips-enabled option to enable cluster-wide FIPS-compliant mode for data in flight. Doing so forces the cluster to use OpenSSL in FIPS mode when connecting to KMIP servers."
---
= Enable cluster-wide FIPS-compliant mode for KMIP server connections
:icons: font
:imagesdir: ../media/

[.lead]
You can use the `security config modify` command with the -`is-fips-enabled` option to enable cluster-wide FIPS-compliant mode for data in flight. Doing so forces the cluster to use OpenSSL in FIPS mode when connecting to KMIP servers.

.Before you begin

* The storage controller must be configured in FIPS-compliant mode.
* All KMIP servers must support TLSv1.2. The system requires TLSv1.2 to complete the connection to the KMIP server when cluster-wide FIPS-compliant mode is enabled.

== ONTAP 9.11.1RC1 consideration

Due to a change in ONTAP version 9.11.1RC1, FIPS 140-2 compliance management mode no longer uses FIPS 140-2 validated software module.

ONTAP 9.11.1RC1 upgraded the OpenSSL version used for management and control plane connections for HTTPS. This version of OpenSSL (OpenSSL 3.x FIPS Provider) has not yet completed the FIPS 140-2 Cryptographic Module Validation Program (CMVP) validation process.

When FIPS compliance mode is enabled, encryption algorithms used for HTTPS connections are identical to the OpenSSL Project OpenSSL 3.x FIPS Provider algorithms that were issued in Cryptographic Algorithm Validation Program (CAVP) certificate A1938. *This change only affects ONTAP systems configured in FIPS compliance mode.*

This issue will be fixed once the upgraded OpenSSL module present in ONTAP 9.11.1RC1 completes FIPS 140-2 validation with NIST. If your environment requires ONTAP cluster management control plane run with a FIPS 140-2 CMVP validated module, then it is recommended to not upgrade to 9.11.1RC1.

This does not affect NetApp encryption at rest technologies like NSE, NVE, and NAE, as those features use a different cryptographic module than the one provided by OpenSSL in ONTAP.

For more information, see link:https://kb.netapp.com/Advice_and_Troubleshooting/Data_Storage_Software/ONTAP_OS/Upgrading_to_ONTAP_9.11.1RC1_results_in_FIPS_140-2_compliance_management_configuration_that_is_not_validated[Upgrading to ONTAP 9.11.1RC1 results in FIPS 140-2 compliance management configuration that is not validated^]

.About this task

When you enable cluster-wide FIPS-compliant mode, the cluster will automatically use only TLS1.2 and FIPS-validated cipher suites. Cluster-wide FIPS-compliant mode is disabled by default.

You must reboot cluster nodes manually after modifying the cluster-wide security configuration.

.Steps

. Set the privilege level to advanced:
+
`set -privilege advanced`
. Verify that TLSv1.2 is supported:
+
`security config show -supported-protocols`
+
For complete command syntax, see the man page.
+
----
cluster1::> security config show
          Cluster                                              Cluster Security
Interface FIPS Mode  Supported Protocols     Supported Ciphers Config Ready
--------- ---------- ----------------------- ----------------- ----------------
SSL       false      TLSv1.2, TLSv1.1, TLSv1 ALL:!LOW:         yes
                                             !aNULL:!EXP:
                                             !eNULL
----

. Enable cluster-wide FIPS-compliant mode:
+
`security config modify -is-fips-enabled true -interface SSL`
+
For complete command syntax, see the man page.

. Reboot cluster nodes manually.
. Verify that cluster-wide FIPS-compliant mode is enabled:
+
`security config show`
+
----
cluster1::> security config show
          Cluster                                              Cluster Security
Interface FIPS Mode  Supported Protocols     Supported Ciphers Config Ready
--------- ---------- ----------------------- ----------------- ----------------
SSL       true       TLSv1.2, TLSv1.1        ALL:!LOW:         yes
                                             !aNULL:!EXP:
                                             !eNULL:!RC4
----

// 2022 april 24, issue #515